# ESP8266雷达系统

基于海凌科LD2451和ESP8266组成的两轮电动车BSD雷达检测系统，并提供声光警告。

## 项目概述

ESP8266雷达系统是一个使用ESP8266微控制器和海凌科LD2451雷达传感器构建的两轮电动车BSD雷达智能检测系统。它能够检测电动车后方特定范围内的移动的车辆行人等目标，并根据目标的距离和速度提供不同级别的警告。系统包括灯光和音频预警功能，可通过Web界面进行配置。

## 主要功能

- **移动物体检测**：检测特定范围内的车辆、行人
- **距离和速度监测**：监测目标的距离和速度
- **可配置的警告阈值**：可设置检测距离、速度和危险阈值
- **声光警告**：根据检测结果提供灯光和声音警告
- **Web配置界面**：通过Web界面轻松配置系统参数
- **自定义音效**：支持上传自定义警告音效文件

## 硬件要求

- NodeMCU ESP8266开发板
- 海凌科LD2451雷达传模块
- LED指示灯（连接到D1引脚）
- I2S音频解码板（非必须）

## 软件依赖

项目使用PlatformIO进行开发和管理，主要依赖以下库：

- ESP8266Audio (^2.0.0) 播放mp3报警音效
- ArduinoJson (^6.21.3) 处理json配置文件
- ESP Async WebServer (^1.2.3) 提供web管理界面
- LittleFS文件系统 读写配置文件、音效文件、html静态文件

## 安装与使用

1. 克隆项目代码：
   ```
   git clone https://github.com/xssxhjw/ESP8266Radar.git
   ```

2. 使用PlatformIO打开项目

3. 连接硬件：
   - 将雷达模块的TX和RX引脚连接到ESP8266的D5(RX)和D6(TX)引脚
   - 将LED指示灯连接到D1引脚
   - 连接I2S音频输出设备（如需要）

4. 编译并上传代码到ESP8266

5. 通过Web浏览器访问ESP8266的IP地址进行配置

## 配置说明

系统可通过Web界面配置以下参数：

- **检测距离**：设置雷达检测的最大距离（米）
- **检测速度**：设置需要检测的最小速度（公里/小时）
- **危险距离**：设置触发危险警告的距离阈值（米）
- **危险速度**：设置触发危险警告的速度阈值（公里/小时）
- **灯光模式**：选择LED常亮或闪烁模式
- **闪烁频率**：设置普通和危险状态下的LED闪烁频率
- **音效音量**：调整警告音效的音量
- **自定义音效**：上传自定义的普通和危险警告音效（MP3格式）

## 项目结构

- `src/`：源代码目录
  - `main.cpp`：主程序入口
  - `Radar.h/cpp`：雷达功能实现
  - `ConfigManager.h/cpp`：配置管理
  - `WebServerManager.h/cpp`：Web服务器管理
- `data/`：Web界面和配置文件
  - `index.html`：Web配置界面
  - `config.json`：系统配置文件
  - `normal.mp3`：普通警告音效
  - `danger.mp3`：危险警告音效
- `platformio.ini`：PlatformIO项目配置

欢迎提交问题和改进建议！